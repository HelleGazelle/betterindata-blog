{{ define "header" }}
	{{ partial "topnav" }}
{{ end }}


{{ define "main" }}
	{{ $activeRelPermalink := .RelPermalink }}

	<main
		class="container flex flex-col-reverse md:flex-row">
		<navbar-toggle>
			<!-- Lessons -->
			<ul class="sticky top-0 h-screen overflow-auto scrollbar mr-4 pb-10 pr-4 min-w-[300px]" id="sidebar">
				{{ range .Parent.Pages.ByWeight }}

					<!-- Lesson tile -->
					<li>
						<a class="text-gray4 hover:text-gray1 {{ if eq $activeRelPermalink .RelPermalink }}active-chapter{{ end }}" href="{{ .Permalink }}">
							<div class="p-1 my-1 flex items-center">
								<span class="mr-auto text-lg pr-2">
									{{ .Title }}
								</span>

								{{ if eq $activeRelPermalink .RelPermalink }}
									<div id="activeChapter" class="ml-5">üöÄ</div>
								{{ end }}
							</div>
						</a>
					</li>
				{{ end }}
			</ul>

			<ul slot="collapse" class="cursor-pointer sticky top-0">
				{{ range .Parent.Pages.ByWeight }}

					<!-- Chapter -->
					{{ if isset .Params "chapter_start" }}
						<div class="flex py-2 mt-3">
							<i class="not-italic p-3 bg-black bg-opacity-20 rounded-full">{{ .Params.emoji }}</i>
						</div>
					{{ end}}
				{{ end }}
			</ul>
		</navbar-toggle>

		<!-- Article -->
		<article class="prose dark:prose-invert pt-1 mx-auto px-3 md:px-8 min-w-0 max-w-none w-full">

		<nav class="flex items-center py-6 px-4 mb-6">
			<div>
				{{with .NextInSection}}
					<a class="navigation-button" href="{{.RelPermalink}}">
						<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
							<path stroke-linecap="round" stroke-linejoin="round" d="M11.25 9l-3 3m0 0l3 3m-3-3h7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
						  </svg>
						Previous Chapter</a>
				{{end}}

				<a class="navigation-button" href="{{.Parent.RelPermalink}}">Project Home üè†</a>

				{{with .PrevInSection}}
					<a class="navigation-button" href="{{.RelPermalink}}">Next Chapter ‚û°Ô∏è</a>
				{{end}}
			</div>
		</nav>



		<header class="border-b-2 border-dashed border-gray6 mb-6">
			<h1>
				{{ .Params.emoji }}
				<span class="gradient-text inline-block mb-0">{{ .Title }}</span>
			</h1>
			<p class="text-sm mt-1 text-gray4">{{ .Description }}</p>
		</header>

		<section>
			{{ .Content }}
		</section>

		</article>
	</main>
{{ end }}
